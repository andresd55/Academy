{"ast":null,"code":"import _asyncToGenerator from \"C:/Repos/ACademy/Academy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { environment } from 'src/environments/environment';\nlet RegisterComponent = class RegisterComponent {\n  constructor(router, formBuilder, sharedService) {\n    this.router = router;\n    this.formBuilder = formBuilder;\n    this.sharedService = sharedService;\n    this.showError = false;\n    this.userCreated = false;\n    this.fileList = new Array();\n    this.allowedFileTypes = ['image/png', 'image/jpeg', 'image/bmp', 'image/gif', 'image/tiff'];\n    this.showErrorText = \"\";\n    this.submitted = false;\n    this.Subjects = [{\n      code: '1',\n      name: 'Calculo'\n    }, {\n      code: '2',\n      name: 'Programacion'\n    }];\n  }\n\n  ngOnInit() {\n    this.getFormLoginUser();\n    this.configUploadFiles();\n  }\n\n  configUploadFiles() {\n    let jQueryInstance = this;\n    $('input[id^=file]').hide();\n    $('#btnupload').click(function () {\n      $(this).prev('input').click();\n    });\n    $('#fotoName').on('dragover', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    $('#fotoName').on('dragenter', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    $('#fotoName').on('drop', function (e) {\n      if (e.originalEvent.dataTransfer) {\n        if (e.originalEvent.dataTransfer.files.length) {\n          e.preventDefault();\n          e.stopPropagation();\n          /*UPLOAD FILES HERE*/\n\n          let file = e.originalEvent.dataTransfer.files[0];\n          let fileName = file.name;\n          jQueryInstance.upload(fileName, file, jQueryInstance.allowedFileTypes);\n        }\n      }\n    });\n  }\n\n  get f() {\n    return this.registerFormLogin.controls;\n  }\n\n  getFormLoginUser() {\n    return this.registerFormLogin = this.formBuilder.group({\n      nombres: ['', [Validators.required]],\n      apellidos: ['', Validators.required],\n      correo: ['', [Validators.required, Validators.email]],\n      foto: ['', Validators.required],\n      genero: ['', Validators.required],\n      usuario: ['', Validators.required],\n      password: ['', Validators.required],\n      idMateria: ['', Validators.required]\n    });\n  }\n\n  enableButtonDocument(target) {\n    $('#lblFuArchivo').html($('#fileupload')[0].files[0].name);\n  }\n\n  handleFileInput(target) {}\n\n  register() {\n    this.submitted = true;\n    console.log(this.registerFormLogin.value);\n\n    if (this.registerFormLogin.valid) {\n      this.sharedService.registerTeacher(this.registerFormLogin.value).subscribe(response => {\n        if (response) {\n          this.userCreated = true;\n        }\n      }, error => {\n        this.showError = true;\n        this.showErrorText = error.error.message;\n      });\n    }\n  }\n\n  IsValid(control) {\n    return this.registerFormLogin.get(control).valid;\n  }\n\n  closeConfirmation() {\n    this.userCreated = false;\n    this.router.navigate(['/login']);\n  }\n\n  resetFiles() {\n    this.f.foto.setValue('');\n    $('#fotoName').val('');\n    $('#file1').val('');\n    this.fileList.forEach((item, index) => {\n      this.fileList.splice(index, 1);\n    });\n  }\n\n  fileChanged(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log('1');\n      _this.file = e.target.files[0];\n      yield _this.upload(_this.file.name, _this.file, _this.allowedFileTypes);\n    })();\n  }\n\n  upload(fileName, fileContent, validator) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      if (yield _this2.validateUploadedFile(fileContent, validator)) {\n        yield _this2.convertFileToBase64(fileContent);\n      }\n    })();\n  }\n\n  validateUploadedFile(fileContent, validator) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.hideErrorType = true;\n      _this3.hideErrorSize = true;\n      _this3.displayInvalidateFileMessage = false;\n      _this3.maxSize = environment.max_file_size + 'MB';\n\n      if (validator.indexOf(fileContent.type) == -1) {\n        _this3.hideErrorType = false;\n      }\n\n      if (fileContent.size > environment.max_file_size * 1000000 || fileContent.size == 0) {\n        _this3.hideErrorSize = false;\n      }\n\n      _this3.displayInvalidateFileMessage = !_this3.hideErrorSize || !_this3.hideErrorType;\n      return !_this3.displayInvalidateFileMessage;\n    })();\n  }\n\n  convertFileToBase64(file) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      var self = _this4;\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        let fileFU = {\n          fileName: file.name,\n          fileType: file.type,\n          fileUrl: 'Finotex',\n          fileTemporal: reader.result.toString().split(',')[1]\n        };\n        self.fileList.push(fileFU);\n        self.updateFileList();\n      };\n\n      reader.onerror = function (error) {\n        console.log('Error: ', error);\n      };\n    })();\n  }\n\n  updateFileList() {\n    let filesUpload = this.fileList[0].fileTemporal;\n    $('#fotoName').val(this.fileList[0].fileName);\n    this.f.foto.setValue(filesUpload);\n  }\n\n};\nRegisterComponent = __decorate([Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})], RegisterComponent);\nexport { RegisterComponent };","map":{"version":3,"sources":["C:/Repos/ACademy/Academy/src/app/components/register/register.component.ts"],"names":["__decorate","Component","Validators","environment","RegisterComponent","constructor","router","formBuilder","sharedService","showError","userCreated","fileList","Array","allowedFileTypes","showErrorText","submitted","Subjects","code","name","ngOnInit","getFormLoginUser","configUploadFiles","jQueryInstance","$","hide","click","prev","on","e","preventDefault","stopPropagation","originalEvent","dataTransfer","files","length","file","fileName","upload","f","registerFormLogin","controls","group","nombres","required","apellidos","correo","email","foto","genero","usuario","password","idMateria","enableButtonDocument","target","html","handleFileInput","register","console","log","value","valid","registerTeacher","subscribe","response","error","message","IsValid","control","get","closeConfirmation","navigate","resetFiles","setValue","val","forEach","item","index","splice","fileChanged","fileContent","validator","validateUploadedFile","convertFileToBase64","hideErrorType","hideErrorSize","displayInvalidateFileMessage","maxSize","max_file_size","indexOf","type","size","self","reader","FileReader","readAsDataURL","onload","fileFU","fileType","fileUrl","fileTemporal","result","toString","split","push","updateFileList","onerror","filesUpload","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { Validators } from '@angular/forms';\r\nimport { environment } from 'src/environments/environment';\r\nlet RegisterComponent = class RegisterComponent {\r\n    constructor(router, formBuilder, sharedService) {\r\n        this.router = router;\r\n        this.formBuilder = formBuilder;\r\n        this.sharedService = sharedService;\r\n        this.showError = false;\r\n        this.userCreated = false;\r\n        this.fileList = new Array();\r\n        this.allowedFileTypes = [\r\n            'image/png',\r\n            'image/jpeg',\r\n            'image/bmp',\r\n            'image/gif',\r\n            'image/tiff'\r\n        ];\r\n        this.showErrorText = \"\";\r\n        this.submitted = false;\r\n        this.Subjects = [\r\n            {\r\n                code: '1',\r\n                name: 'Calculo',\r\n            },\r\n            {\r\n                code: '2',\r\n                name: 'Programacion',\r\n            }\r\n        ];\r\n    }\r\n    ngOnInit() {\r\n        this.getFormLoginUser();\r\n        this.configUploadFiles();\r\n    }\r\n    configUploadFiles() {\r\n        let jQueryInstance = this;\r\n        $('input[id^=file]').hide();\r\n        $('#btnupload').click(function () {\r\n            $(this).\r\n                prev('input').click();\r\n        });\r\n        $('#fotoName').on('dragover', function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n        $('#fotoName').on('dragenter', function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n        $('#fotoName').on('drop', function (e) {\r\n            if (e.originalEvent.dataTransfer) {\r\n                if (e.originalEvent.dataTransfer.files.length) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    /*UPLOAD FILES HERE*/\r\n                    let file = e.originalEvent.dataTransfer.files[0];\r\n                    let fileName = file.name;\r\n                    jQueryInstance.upload(fileName, file, jQueryInstance.allowedFileTypes);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    get f() {\r\n        return this.registerFormLogin.controls;\r\n    }\r\n    getFormLoginUser() {\r\n        return (this.registerFormLogin = this.formBuilder.group({\r\n            nombres: ['', [Validators.required]],\r\n            apellidos: ['', Validators.required],\r\n            correo: ['', [Validators.required, Validators.email]],\r\n            foto: ['', Validators.required],\r\n            genero: ['', Validators.required],\r\n            usuario: ['', Validators.required],\r\n            password: ['', Validators.required],\r\n            idMateria: ['', Validators.required],\r\n        }));\r\n    }\r\n    enableButtonDocument(target) {\r\n        $('#lblFuArchivo').html($('#fileupload')[0].files[0].name);\r\n    }\r\n    handleFileInput(target) {\r\n    }\r\n    register() {\r\n        this.submitted = true;\r\n        console.log(this.registerFormLogin.value);\r\n        if (this.registerFormLogin.valid) {\r\n            this.sharedService.registerTeacher(this.registerFormLogin.value).subscribe((response) => {\r\n                if (response) {\r\n                    this.userCreated = true;\r\n                }\r\n            }, (error) => {\r\n                this.showError = true;\r\n                this.showErrorText = error.error.message;\r\n            });\r\n        }\r\n    }\r\n    IsValid(control) {\r\n        return this.registerFormLogin.get(control).valid;\r\n    }\r\n    closeConfirmation() {\r\n        this.userCreated = false;\r\n        this.router.navigate(['/login']);\r\n    }\r\n    resetFiles() {\r\n        this.f.foto.setValue('');\r\n        $('#fotoName').val('');\r\n        $('#file1').val('');\r\n        this.fileList.forEach((item, index) => {\r\n            this.fileList.splice(index, 1);\r\n        });\r\n    }\r\n    async fileChanged(e) {\r\n        console.log('1');\r\n        this.file = e.target.files[0];\r\n        await this.upload(this.file.name, this.file, this.allowedFileTypes);\r\n    }\r\n    async upload(fileName, fileContent, validator) {\r\n        if (await this.validateUploadedFile(fileContent, validator)) {\r\n            await this.convertFileToBase64(fileContent);\r\n        }\r\n    }\r\n    async validateUploadedFile(fileContent, validator) {\r\n        this.hideErrorType = true;\r\n        this.hideErrorSize = true;\r\n        this.displayInvalidateFileMessage = false;\r\n        this.maxSize = environment.max_file_size + 'MB';\r\n        if (validator.indexOf(fileContent.type) == -1) {\r\n            this.hideErrorType = false;\r\n        }\r\n        if (fileContent.size > (environment.max_file_size * 1000000) ||\r\n            fileContent.size == 0) {\r\n            this.hideErrorSize = false;\r\n        }\r\n        this.displayInvalidateFileMessage = !this.hideErrorSize || !this.hideErrorType;\r\n        return !this.displayInvalidateFileMessage;\r\n    }\r\n    async convertFileToBase64(file) {\r\n        var self = this;\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function () {\r\n            let fileFU = {\r\n                fileName: file.name,\r\n                fileType: file.type,\r\n                fileUrl: 'Finotex',\r\n                fileTemporal: reader.result.toString().split(',')[1],\r\n            };\r\n            self.fileList.push(fileFU);\r\n            self.updateFileList();\r\n        };\r\n        reader.onerror = function (error) {\r\n            console.log('Error: ', error);\r\n        };\r\n    }\r\n    updateFileList() {\r\n        let filesUpload = this.fileList[0].fileTemporal;\r\n        $('#fotoName').val(this.fileList[0].fileName);\r\n        this.f.foto.setValue(filesUpload);\r\n    }\r\n};\r\nRegisterComponent = __decorate([\r\n    Component({\r\n        selector: 'app-register',\r\n        templateUrl: './register.component.html',\r\n        styleUrls: ['./register.component.css']\r\n    })\r\n], RegisterComponent);\r\nexport { RegisterComponent };\r\n"]},"metadata":{},"sourceType":"module"}